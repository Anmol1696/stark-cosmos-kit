{"version":3,"sources":["../../src/utils/core.ts"],"sourcesContent":["import { OS } from '@cosmos-kit/core';\n\nconst WALLETCONNECT_DEEPLINK_CHOICE = 'WALLETCONNECT_DEEPLINK_CHOICE';\n\nexport const CoreUtil = {\n  isHttpUrl(url: string) {\n    return url.startsWith('http://') || url.startsWith('https://');\n  },\n\n  formatNativeUrl(appUrl: string, wcUri: string, os: OS, name: string): string {\n    if (CoreUtil.isHttpUrl(appUrl)) {\n      return this.formatUniversalUrl(appUrl, wcUri, name);\n    }\n    const plainAppUrl = appUrl.replaceAll('/', '').replaceAll(':', '');\n    CoreUtil.setWalletConnectDeepLink(plainAppUrl, name);\n    const encodedWcUrl = encodeURIComponent(wcUri);\n\n    return `${plainAppUrl}://wc?uri=${encodedWcUrl}`;\n  },\n\n  formatUniversalUrl(appUrl: string, wcUri: string, name: string): string {\n    if (!CoreUtil.isHttpUrl(appUrl)) {\n      return this.formatNativeUrl(appUrl, wcUri, name);\n    }\n    let plainAppUrl = appUrl;\n    if (appUrl.endsWith('/')) {\n      plainAppUrl = appUrl.slice(0, -1);\n    }\n    CoreUtil.setWalletConnectDeepLink(plainAppUrl, name);\n    const encodedWcUrl = encodeURIComponent(wcUri);\n\n    return `${plainAppUrl}/wc?uri=${encodedWcUrl}`;\n  },\n\n  async wait(miliseconds: number) {\n    return new Promise((resolve) => {\n      setTimeout(resolve, miliseconds);\n    });\n  },\n\n  openHref(href: string, target = '_self') {\n    window.open(href, target, 'noreferrer noopener');\n  },\n\n  setWalletConnectDeepLink(href: string, name: string) {\n    localStorage.setItem(\n      WALLETCONNECT_DEEPLINK_CHOICE,\n      JSON.stringify({ href, name })\n    );\n  },\n\n  removeWalletConnectDeepLink() {\n    localStorage.removeItem(WALLETCONNECT_DEEPLINK_CHOICE);\n  },\n};\n"],"mappings":";AAEA,IAAM,gCAAgC;AAE/B,IAAM,WAAW;AAAA,EACtB,UAAU,KAAa;AACrB,WAAO,IAAI,WAAW,SAAS,KAAK,IAAI,WAAW,UAAU;AAAA,EAC/D;AAAA,EAEA,gBAAgB,QAAgB,OAAe,IAAQ,MAAsB;AAC3E,QAAI,SAAS,UAAU,MAAM,GAAG;AAC9B,aAAO,KAAK,mBAAmB,QAAQ,OAAO,IAAI;AAAA,IACpD;AACA,UAAM,cAAc,OAAO,WAAW,KAAK,EAAE,EAAE,WAAW,KAAK,EAAE;AACjE,aAAS,yBAAyB,aAAa,IAAI;AACnD,UAAM,eAAe,mBAAmB,KAAK;AAE7C,WAAO,GAAG,wBAAwB;AAAA,EACpC;AAAA,EAEA,mBAAmB,QAAgB,OAAe,MAAsB;AACtE,QAAI,CAAC,SAAS,UAAU,MAAM,GAAG;AAC/B,aAAO,KAAK,gBAAgB,QAAQ,OAAO,IAAI;AAAA,IACjD;AACA,QAAI,cAAc;AAClB,QAAI,OAAO,SAAS,GAAG,GAAG;AACxB,oBAAc,OAAO,MAAM,GAAG,EAAE;AAAA,IAClC;AACA,aAAS,yBAAyB,aAAa,IAAI;AACnD,UAAM,eAAe,mBAAmB,KAAK;AAE7C,WAAO,GAAG,sBAAsB;AAAA,EAClC;AAAA,EAEA,MAAM,KAAK,aAAqB;AAC9B,WAAO,IAAI,QAAQ,CAAC,YAAY;AAC9B,iBAAW,SAAS,WAAW;AAAA,IACjC,CAAC;AAAA,EACH;AAAA,EAEA,SAAS,MAAc,SAAS,SAAS;AACvC,WAAO,KAAK,MAAM,QAAQ,qBAAqB;AAAA,EACjD;AAAA,EAEA,yBAAyB,MAAc,MAAc;AACnD,iBAAa;AAAA,MACX;AAAA,MACA,KAAK,UAAU,EAAE,MAAM,KAAK,CAAC;AAAA,IAC/B;AAAA,EACF;AAAA,EAEA,8BAA8B;AAC5B,iBAAa,WAAW,6BAA6B;AAAA,EACvD;AACF;","names":[]}