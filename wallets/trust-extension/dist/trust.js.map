{"version":3,"sources":["../src/trust.ts","../src/extension/chain-wallet.ts","../src/extension/main-wallet.ts","../src/extension/client.ts","../src/extension/utils.ts","../src/constant.ts","../src/extension/registry.ts"],"sourcesContent":["import { trustExtensionInfo, TrustExtensionWallet } from './extension';\n\nconst trustExtension = new TrustExtensionWallet(trustExtensionInfo);\n\nexport const wallets = [trustExtension];\n","import { ChainRecord, ChainWalletBase, Wallet } from '@cosmos-kit/core';\n\nexport class ChainTrustExtension extends ChainWalletBase {\n  constructor(walletInfo: Wallet, chainInfo: ChainRecord) {\n    super(walletInfo, chainInfo);\n  }\n}\n","import { Wallet } from '@cosmos-kit/core';\nimport { MainWalletBase } from '@cosmos-kit/core';\n\nimport { ChainTrustExtension } from './chain-wallet';\nimport { TrustClient } from './client';\nimport { getTrustFromExtension } from './utils';\n\nexport class TrustExtensionWallet extends MainWalletBase {\n  constructor(walletInfo: Wallet) {\n    super(walletInfo, ChainTrustExtension);\n  }\n\n  async initClient() {\n    this.initingClient();\n    try {\n      const trust = await getTrustFromExtension();\n      this.initClientDone(trust ? new TrustClient(trust) : undefined);\n    } catch (error) {\n      this.logger?.error(error);\n      this.initClientError(error);\n    }\n  }\n}\n","import { Algo } from '@cosmjs/proto-signing';\nimport { SignType, WalletClient } from '@cosmos-kit/core';\n\nimport { Trust } from './types';\n\nexport class TrustClient implements WalletClient {\n  readonly client: Trust;\n\n  constructor(client: Trust) {\n    this.client = client;\n  }\n\n  async enable(chainIds: string | string[]) {\n    await this.client.enable(chainIds);\n  }\n\n  async getSimpleAccount(chainId: string) {\n    const { address, username } = await this.getAccount(chainId);\n    return {\n      namespace: 'cosmos',\n      chainId,\n      address,\n      username,\n    };\n  }\n\n  async getAccount(chainId: string) {\n    const key = await this.client.getKey(chainId);\n    return {\n      username: key.name,\n      address: key.bech32Address,\n      algo: key.algo as Algo,\n      pubkey: key.pubKey,\n    };\n  }\n\n  getOfflineSigner(chainId: string, preferredSignType?: SignType) {\n    // switch (preferredSignType) {\n    //   case 'amino':\n    //     return this.getOfflineSignerAmino(chainId);\n    //   case 'direct':\n    //     return this.getOfflineSignerDirect(chainId);\n    //   default:\n    //     return this.getOfflineSignerAmino(chainId);\n    // }\n    return this.client.getOfflineSigner(chainId);\n  }\n}\n","import { ClientNotExistError } from '@cosmos-kit/core';\n\nimport { Trust } from './types';\n\ninterface TrustWindow {\n  trustwallet?: TrustExtension;\n}\n\ninterface TrustExtension {\n  cosmos?: Trust;\n}\n\nexport const getTrustFromExtension: () => Promise<\n  Trust | undefined\n> = async () => {\n  if (typeof window === 'undefined') {\n    return void 0;\n  }\n\n  const trust = (window as TrustWindow).trustwallet?.cosmos;\n\n  if (trust) {\n    return trust;\n  }\n\n  if (document.readyState === 'complete') {\n    if (trust) {\n      return trust;\n    } else {\n      throw ClientNotExistError;\n    }\n  }\n\n  return new Promise((resolve, reject) => {\n    const documentStateChange = (event: Event) => {\n      if (\n        event.target &&\n        (event.target as Document).readyState === 'complete'\n      ) {\n        if (trust) {\n          resolve(trust);\n        } else {\n          reject(ClientNotExistError.message);\n        }\n        document.removeEventListener('readystatechange', documentStateChange);\n      }\n    };\n\n    document.addEventListener('readystatechange', documentStateChange);\n  });\n};\n","export const ICON =\n  'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjUiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NSA2NCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwKSI+CjxwYXRoIGQ9Ik0zMi4zOTk5IDY0QzUwLjA3MyA2NCA2NC4zOTk5IDQ5LjY3MzEgNjQuMzk5OSAzMkM2NC4zOTk5IDE0LjMyNjkgNTAuMDczIDAgMzIuMzk5OSAwQzE0LjcyNjggMCAwLjM5OTkwMiAxNC4zMjY5IDAuMzk5OTAyIDMyQzAuMzk5OTAyIDQ5LjY3MzEgMTQuNzI2OCA2NCAzMi4zOTk5IDY0WiIgZmlsbD0iIzMzNzVCQiIvPgo8cGF0aCBkPSJNMzIuNjI2NyAxNEMzOC45NTA4IDE5LjI4MTYgNDYuMjAyOSAxOC45NTU5IDQ4LjI3NSAxOC45NTU5QzQ3LjgyMTcgNDguOTkzNyA0NC4zNjgzIDQzLjAzNzMgMzIuNjI2NyA1MS40NkMyMC44ODUxIDQzLjAzNzMgMTcuNDUzMyA0OC45OTM3IDE3IDE4Ljk1NTlDMTkuMDUwNSAxOC45NTU5IDI2LjMwMjYgMTkuMjgxNiAzMi42MjY3IDE0WiIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLXdpZHRoPSI0IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8L2c+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwIj4KPHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiBmaWxsPSJ3aGl0ZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4zOTk5MDIpIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg==';\n","import { Wallet } from '@cosmos-kit/core';\n\nimport { ICON } from '../constant';\n\nexport const trustExtensionInfo: Wallet = {\n  name: 'trust-extension',\n  prettyName: 'Trust',\n  logo: ICON,\n  mode: 'extension',\n  mobileDisabled: true,\n  rejectMessage: {\n    source: 'Request rejected',\n  },\n  downloads: [\n    {\n      device: 'mobile',\n      os: 'android',\n      link:\n        'https://play.google.com/store/apps/details?id=com.wallet.crypto.trustapp&referrer=utm_source%3Dwebsite',\n    },\n    {\n      device: 'mobile',\n      os: 'ios',\n      link: 'https://apps.apple.com/app/apple-store/id1288339409?mt=8',\n    },\n  ],\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACAA,kBAAqD;AAE9C,IAAM,sBAAN,cAAkC,4BAAgB;AAAA,EACvD,YAAY,YAAoB,WAAwB;AACtD,UAAM,YAAY,SAAS;AAAA,EAC7B;AACF;;;ACLA,IAAAA,eAA+B;;;ACIxB,IAAM,cAAN,MAA0C;AAAA,EAG/C,YAAY,QAAe;AACzB,SAAK,SAAS;AAAA,EAChB;AAAA,EAEA,MAAM,OAAO,UAA6B;AACxC,UAAM,KAAK,OAAO,OAAO,QAAQ;AAAA,EACnC;AAAA,EAEA,MAAM,iBAAiB,SAAiB;AACtC,UAAM,EAAE,SAAS,SAAS,IAAI,MAAM,KAAK,WAAW,OAAO;AAC3D,WAAO;AAAA,MACL,WAAW;AAAA,MACX;AAAA,MACA;AAAA,MACA;AAAA,IACF;AAAA,EACF;AAAA,EAEA,MAAM,WAAW,SAAiB;AAChC,UAAM,MAAM,MAAM,KAAK,OAAO,OAAO,OAAO;AAC5C,WAAO;AAAA,MACL,UAAU,IAAI;AAAA,MACd,SAAS,IAAI;AAAA,MACb,MAAM,IAAI;AAAA,MACV,QAAQ,IAAI;AAAA,IACd;AAAA,EACF;AAAA,EAEA,iBAAiB,SAAiB,mBAA8B;AAS9D,WAAO,KAAK,OAAO,iBAAiB,OAAO;AAAA,EAC7C;AACF;;;AC/CA,IAAAC,eAAoC;AAY7B,IAAM,wBAET,YAAY;AACd,MAAI,OAAO,WAAW,aAAa;AACjC,WAAO;AAAA,EACT;AAEA,QAAM,QAAS,OAAuB,aAAa;AAEnD,MAAI,OAAO;AACT,WAAO;AAAA,EACT;AAEA,MAAI,SAAS,eAAe,YAAY;AACtC,QAAI,OAAO;AACT,aAAO;AAAA,IACT,OAAO;AACL,YAAM;AAAA,IACR;AAAA,EACF;AAEA,SAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACtC,UAAM,sBAAsB,CAAC,UAAiB;AAC5C,UACE,MAAM,UACL,MAAM,OAAoB,eAAe,YAC1C;AACA,YAAI,OAAO;AACT,kBAAQ,KAAK;AAAA,QACf,OAAO;AACL,iBAAO,iCAAoB,OAAO;AAAA,QACpC;AACA,iBAAS,oBAAoB,oBAAoB,mBAAmB;AAAA,MACtE;AAAA,IACF;AAEA,aAAS,iBAAiB,oBAAoB,mBAAmB;AAAA,EACnE,CAAC;AACH;;;AF3CO,IAAM,uBAAN,cAAmC,4BAAe;AAAA,EACvD,YAAY,YAAoB;AAC9B,UAAM,YAAY,mBAAmB;AAAA,EACvC;AAAA,EAEA,MAAM,aAAa;AACjB,SAAK,cAAc;AACnB,QAAI;AACF,YAAM,QAAQ,MAAM,sBAAsB;AAC1C,WAAK,eAAe,QAAQ,IAAI,YAAY,KAAK,IAAI,MAAS;AAAA,IAChE,SAAS,OAAP;AACA,WAAK,QAAQ,MAAM,KAAK;AACxB,WAAK,gBAAgB,KAAK;AAAA,IAC5B;AAAA,EACF;AACF;;;AGtBO,IAAM,OACX;;;ACGK,IAAM,qBAA6B;AAAA,EACxC,MAAM;AAAA,EACN,YAAY;AAAA,EACZ,MAAM;AAAA,EACN,MAAM;AAAA,EACN,gBAAgB;AAAA,EAChB,eAAe;AAAA,IACb,QAAQ;AAAA,EACV;AAAA,EACA,WAAW;AAAA,IACT;AAAA,MACE,QAAQ;AAAA,MACR,IAAI;AAAA,MACJ,MACE;AAAA,IACJ;AAAA,IACA;AAAA,MACE,QAAQ;AAAA,MACR,IAAI;AAAA,MACJ,MAAM;AAAA,IACR;AAAA,EACF;AACF;;;ANxBA,IAAM,iBAAiB,IAAI,qBAAqB,kBAAkB;AAE3D,IAAM,UAAU,CAAC,cAAc;","names":["import_core","import_core"]}