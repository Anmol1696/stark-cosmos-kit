{"version":3,"sources":["../src/index.ts","../src/extension/chain-wallet.ts","../src/extension/main-wallet.ts","../src/extension/client.ts","../src/extension/utils.ts","../src/constant.ts","../src/extension/registry.ts","../src/leap.ts"],"sourcesContent":["export * from './extension';\nexport * from './leap';\n","import { ChainRecord, ChainWalletBase, Wallet } from '@cosmos-kit/core';\n\nexport class ChainLeapExtension extends ChainWalletBase {\n  constructor(walletInfo: Wallet, chainInfo: ChainRecord) {\n    super(walletInfo, chainInfo);\n  }\n}\n","import { Wallet } from '@cosmos-kit/core';\nimport { MainWalletBase } from '@cosmos-kit/core';\n\nimport { ChainLeapExtension } from './chain-wallet';\nimport { LeapClient } from './client';\nimport { getLeapFromExtension } from './utils';\n\nexport class LeapExtensionWallet extends MainWalletBase {\n  constructor(walletInfo: Wallet) {\n    super(walletInfo, ChainLeapExtension);\n  }\n\n  async initClient() {\n    this.initingClient();\n    try {\n      const leap = await getLeapFromExtension();\n      this.initClientDone(leap ? new LeapClient(leap) : undefined);\n    } catch (error) {\n      this.logger?.error(error);\n      this.initClientError(error);\n    }\n  }\n}\n","import { StdSignature, StdSignDoc } from '@cosmjs/amino';\nimport { Algo, OfflineDirectSigner } from '@cosmjs/proto-signing';\nimport {\n  BroadcastMode,\n  ChainRecord,\n  ExtendedHttpEndpoint,\n  SignType,\n  SuggestToken,\n} from '@cosmos-kit/core';\nimport { DirectSignDoc, SignOptions, WalletClient } from '@cosmos-kit/core';\nimport { chainRegistryChainToKeplr } from '@chain-registry/keplr';\n\nimport { Leap } from './types';\n\nexport class LeapClient implements WalletClient {\n  readonly client: Leap;\n\n  constructor(client: Leap) {\n    this.client = client;\n  }\n\n  async enable(chainIds: string | string[]) {\n    await this.client.enable(chainIds);\n  }\n\n  async suggestToken({ chainId, tokens, type }: SuggestToken) {\n    if (type === 'cw20') {\n      for (const { contractAddress } of tokens) {\n        await this.client.suggestToken(chainId, contractAddress);\n      }\n    }\n  }\n\n  async addChain(chainInfo: ChainRecord) {\n    const suggestChain = chainRegistryChainToKeplr(\n      chainInfo.chain,\n      chainInfo.assetList ? [chainInfo.assetList] : []\n    );\n\n    if (chainInfo.preferredEndpoints?.rest?.[0]) {\n      (suggestChain.rest as\n        | string\n        | ExtendedHttpEndpoint) = chainInfo.preferredEndpoints?.rest?.[0];\n    }\n\n    if (chainInfo.preferredEndpoints?.rpc?.[0]) {\n      (suggestChain.rpc as\n        | string\n        | ExtendedHttpEndpoint) = chainInfo.preferredEndpoints?.rpc?.[0];\n    }\n\n    await this.client.experimentalSuggestChain(suggestChain);\n  }\n\n  async disconnect() {\n    await this.client.disconnect();\n  }\n\n  async getSimpleAccount(chainId: string) {\n    const { address, username } = await this.getAccount(chainId);\n    return {\n      namespace: 'cosmos',\n      chainId,\n      address,\n      username,\n    };\n  }\n\n  async getAccount(chainId: string) {\n    const key = await this.client.getKey(chainId);\n    return {\n      username: key.name,\n      address: key.bech32Address,\n      algo: key.algo as Algo,\n      pubkey: key.pubKey,\n    };\n  }\n\n  getOfflineSigner(chainId: string, preferredSignType?: SignType) {\n    switch (preferredSignType) {\n      case 'amino':\n        return this.getOfflineSignerAmino(chainId);\n      case 'direct':\n        return this.getOfflineSignerDirect(chainId);\n      default:\n        return this.getOfflineSignerAmino(chainId);\n    }\n    // return this.client.getOfflineSignerAuto(chainId);\n  }\n\n  getOfflineSignerAmino(chainId: string) {\n    return this.client.getOfflineSignerOnlyAmino(chainId);\n  }\n\n  getOfflineSignerDirect(chainId: string) {\n    return this.client.getOfflineSigner(chainId) as OfflineDirectSigner;\n  }\n\n  async signAmino(\n    chainId: string,\n    signer: string,\n    signDoc: StdSignDoc,\n    signOptions?: SignOptions\n  ) {\n    return await this.client.signAmino(chainId, signer, signDoc, signOptions);\n  }\n\n  async signArbitrary(\n    chainId: string,\n    signer: string,\n    data: string | Uint8Array\n  ): Promise<StdSignature> {\n    return await this.client.signArbitrary(chainId, signer, data);\n  }\n\n  async signDirect(\n    chainId: string,\n    signer: string,\n    signDoc: DirectSignDoc,\n    signOptions?: SignOptions\n  ) {\n    return await this.client.signDirect(chainId, signer, signDoc, signOptions);\n  }\n\n  async sendTx(chainId: string, tx: Uint8Array, mode: BroadcastMode) {\n    return await this.client.sendTx(chainId, tx, mode);\n  }\n}\n","import { ClientNotExistError } from '@cosmos-kit/core';\n\nimport { Leap } from './types';\n\ninterface LeapWindow {\n  leap?: Leap;\n}\n\nexport const getLeapFromExtension: () => Promise<\n  Leap | undefined\n> = async () => {\n  if (typeof window === 'undefined') {\n    return void 0;\n  }\n\n  const leap = (window as LeapWindow).leap;\n\n  if (leap) {\n    return leap;\n  }\n\n  if (document.readyState === 'complete') {\n    if (leap) {\n      return leap;\n    } else {\n      throw ClientNotExistError;\n    }\n  }\n\n  return new Promise((resolve, reject) => {\n    const documentStateChange = (event: Event) => {\n      if (\n        event.target &&\n        (event.target as Document).readyState === 'complete'\n      ) {\n        if (leap) {\n          resolve(leap);\n        } else {\n          reject(ClientNotExistError.message);\n        }\n        document.removeEventListener('readystatechange', documentStateChange);\n      }\n    };\n\n    document.addEventListener('readystatechange', documentStateChange);\n  });\n};\n","export const ICON =\n  'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODA1IiBoZWlnaHQ9IjgwNSIgdmlld0JveD0iMCAwIDgwNSA4MDUiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMF8yMzY0XzMzNzU1KSI+CjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMV8yMzY0XzMzNzU1KSI+CjxwYXRoIGQ9Ik03MTIuMzEgMzczLjU3NUM3MTIuMzEgNDg3LjAzOSA1NzcuMzU1IDUzMy4xNDcgNDA5Ljc5MSA1MzMuMTQ3QzI0Mi4yMjYgNTMzLjE0NyAxMDUuMzA3IDQ4Ny4wMzkgMTA1LjMwNyAzNzMuNTc1QzEwNS4zMDcgMjYwLjExMSAyNDEuMjQ0IDE2OC4yOTcgNDA4LjgwOCAxNjguMjk3QzU3Ni4zNzMgMTY4LjI5NyA3MTIuMzEgMjYwLjMxMSA3MTIuMzEgMzczLjU3NVoiIGZpbGw9IiM0QkFGNzQiLz4KPHBhdGggZD0iTTY4MS41MTMgMTI2LjU0NEM2ODEuNTEzIDY2LjgwNDkgNjMzLjk3NSAxOC4yOTE5IDU3NS40MzUgMTguMjkxOUM1NDIuNDMzIDE4LjI5MTkgNTEyLjk2NyAzMy43Mjc5IDQ5My41MTkgNTcuNzgzOUM0NjcgNTEuNzY5OSA0MzguNzEyIDQ4LjM2MTkgNDA5LjQ0MiA0OC4zNjE5QzM4MC4xNzMgNDguMzYxOSAzNTEuODg1IDUxLjU2OTQgMzI1LjM2NSA1Ny43ODM5QzMwNS43MjEgMzMuNzI3OSAyNzYuMjU1IDE4LjI5MTkgMjQzLjQ0OSAxOC4yOTE5QzE4NC45MSAxOC4yOTE5IDEzNy4zNzEgNjYuODA0OSAxMzcuMzcxIDEyNi41NDRDMTM3LjM3MSAxNDYuMTkgMTQyLjQ3OSAxNjQuNDMyIDE1MS4zMTggMTgwLjI2OUMxNDIuODcxIDE5OC43MTIgMTM4LjM1MyAyMTguMzU4IDEzOC4zNTMgMjM4LjgwNUMxMzguMzUzIDM0NC4wNTEgMjU5Ljc1NCA0MjkuMjQ5IDQwOS40NDIgNDI5LjI0OUM1NTkuMTMxIDQyOS4yNDkgNjgwLjUzMSAzNDQuMDUxIDY4MC41MzEgMjM4LjgwNUM2ODAuNTMxIDIxOC4zNTggNjc2LjAxMyAxOTguNzEyIDY2Ny41NjYgMTgwLjI2OUM2NzYuNDA2IDE2NC40MzIgNjgxLjUxMyAxNDYuMTkgNjgxLjUxMyAxMjYuNTQ0WiIgZmlsbD0iIzMyREE2RCIvPgo8cGF0aCBkPSJNMjM0LjkgMTg2Ljc2NkMyNzAuNzAyIDE4Ni43NjYgMjk5LjcyNSAxNTcuMTQ4IDI5OS43MjUgMTIwLjYxMkMyOTkuNzI1IDg0LjA3NjMgMjcwLjcwMiA1NC40NTgxIDIzNC45IDU0LjQ1ODFDMTk5LjA5OCA1NC40NTgxIDE3MC4wNzQgODQuMDc2MyAxNzAuMDc0IDEyMC42MTJDMTcwLjA3NCAxNTcuMTQ4IDE5OS4wOTggMTg2Ljc2NiAyMzQuOSAxODYuNzY2WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTU4MC43OTggMTg2Ljc2NkM2MTYuNiAxODYuNzY2IDY0NS42MjQgMTU3LjE0OCA2NDUuNjI0IDEyMC42MTJDNjQ1LjYyNCA4NC4wNzYzIDYxNi42IDU0LjQ1ODEgNTgwLjc5OCA1NC40NTgxQzU0NC45OTYgNTQuNDU4MSA1MTUuOTczIDg0LjA3NjMgNTE1Ljk3MyAxMjAuNjEyQzUxNS45NzMgMTU3LjE0OCA1NDQuOTk2IDE4Ni43NjYgNTgwLjc5OCAxODYuNzY2WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTIwMC4yODggNTI1LjM1MUMyMTQuMjM1IDUyNS4zNTEgMjI1LjIzNiA1MTIuOTIyIDIyMy42NjQgNDk4Ljg5QzIxNy45NjcgNDQ5LjE3NCAxOTMuODA1IDM0MS41MjMgODcuNTMwMyAyNzYuNzcyQy01My45MDc0IDE5MC41NzEgNTguMDY0MSA0ODcuMjYyIDU4LjA2NDEgNDg3LjI2MkwyOC43OTQzIDUwNC41MDNDMTguOTcyMyA1MTAuMzE2IDIzLjA5NzUgNTI1LjM1MSAzNC4yOTQ3IDUyNS4zNTFIMjAwLjI4OFoiIGZpbGw9IiMzMkRBNkQiLz4KPHBhdGggZD0iTTYyMi4zNDMgNTI1LjM1MUM2MDkuNzcxIDUyNS4zNTEgNTk5Ljk0OSA1MTIuOTIyIDYwMS4zMjQgNDk4Ljg5QzYwNi4yMzUgNDQ5LjM3NCA2MjguMjM2IDM0MS41MjMgNzI0LjEgMjc2Ljc3MkM4NTEuOTgzIDE5MC41NzEgNzUwLjgxNiA0ODcuMjYyIDc1MC44MTYgNDg3LjI2Mkw3NzcuMzM1IDUwNC41MDNDNzg2LjE3NSA1MTAuMzE2IDc4Mi40NDMgNTI1LjM1MSA3NzIuNDI0IDUyNS4zNTFINjIyLjM0M1oiIGZpbGw9IiMzMkRBNkQiLz4KPHBhdGggZD0iTTIzNS4wMTcgMTMyLjI4OEMyNDEuNTI2IDEzMi4yODggMjQ2LjgwMyAxMjYuOTAzIDI0Ni44MDMgMTIwLjI2QzI0Ni44MDMgMTEzLjYxNyAyNDEuNTI2IDEwOC4yMzIgMjM1LjAxNyAxMDguMjMyQzIyOC41MDcgMTA4LjIzMiAyMjMuMjMgMTEzLjYxNyAyMjMuMjMgMTIwLjI2QzIyMy4yMyAxMjYuOTAzIDIyOC41MDcgMTMyLjI4OCAyMzUuMDE3IDEzMi4yODhaIiBmaWxsPSIjMEQwRDBEIi8+CjxwYXRoIGQ9Ik01ODAuNTg5IDEzMi4yODhDNTg3LjA5OSAxMzIuMjg4IDU5Mi4zNzYgMTI2LjkwMyA1OTIuMzc2IDEyMC4yNkM1OTIuMzc2IDExMy42MTcgNTg3LjA5OSAxMDguMjMyIDU4MC41ODkgMTA4LjIzMkM1NzQuMDggMTA4LjIzMiA1NjguODAzIDExMy42MTcgNTY4LjgwMyAxMjAuMjZDNTY4LjgwMyAxMjYuOTAzIDU3NC4wOCAxMzIuMjg4IDU4MC41ODkgMTMyLjI4OFoiIGZpbGw9IiMwRDBEMEQiLz4KPC9nPgo8cmVjdCB5PSI1ODYiIHdpZHRoPSI4MDUiIGhlaWdodD0iMzEwIiBmaWxsPSIjQUM0QkZGIi8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDBfMjM2NF8zMzc1NSI+CjxyZWN0IHdpZHRoPSI4MDUiIGhlaWdodD0iODA1IiByeD0iMTQ0LjkiIGZpbGw9IndoaXRlIi8+CjwvY2xpcFBhdGg+CjxjbGlwUGF0aCBpZD0iY2xpcDFfMjM2NF8zMzc1NSI+CjxyZWN0IHdpZHRoPSI3NzIuOCIgaGVpZ2h0PSI1MTUuMiIgZmlsbD0id2hpdGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE2IDE4KSIvPgo8L2NsaXBQYXRoPgo8L2RlZnM+Cjwvc3ZnPgo=';\n","import { Wallet } from '@cosmos-kit/core';\n\nimport { ICON } from '../constant';\n\nexport const leapExtensionInfo: Wallet = {\n  name: 'leap-extension',\n  prettyName: 'Leap',\n  logo: ICON,\n  mode: 'extension',\n  mobileDisabled: true,\n  rejectMessage: {\n    source: 'Request rejected',\n  },\n  connectEventNamesOnWindow: ['leap_keystorechange'],\n  downloads: [\n    {\n      device: 'desktop',\n      browser: 'chrome',\n      link:\n        'https://chrome.google.com/webstore/detail/leap-cosmos-wallet/fcfcfllfndlomdhbehjjcoimbgofdncg',\n    },\n    {\n      link:\n        'https://chrome.google.com/webstore/detail/leap-cosmos-wallet/fcfcfllfndlomdhbehjjcoimbgofdncg',\n    },\n  ],\n};\n","import { leapExtensionInfo, LeapExtensionWallet } from './extension';\n\nconst leapExtension = new LeapExtensionWallet(leapExtensionInfo);\n\nexport const wallets = [leapExtension];\n"],"mappings":"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","names":["import_core","import_core"]}