{"version":3,"sources":["../../src/extension/client.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { chainRegistryChainToKeplr } from '@chain-registry/keplr';\nimport { Algo, StdSignDoc, StdSignature } from '@cosmjs/amino';\nimport {\n  BroadcastMode,\n  ChainRecord,\n  DirectSignDoc,\n  ExtendedHttpEndpoint,\n  SignOptions,\n  SignType,\n  WalletClient,\n} from '@cosmos-kit/core';\n\nimport type { Vectis } from './types';\n\nexport class VectisClient implements WalletClient {\n  readonly client: Vectis;\n\n  constructor(client: Vectis) {\n    this.client = client;\n  }\n\n  async enable(chainIds: string | string[]) {\n    await this.client.enable(chainIds);\n  }\n\n  async getSimpleAccount(chainId: string) {\n    const { address, name } = await this.client.getKey(chainId);\n    return {\n      namespace: 'cosmos',\n      chainId,\n      address,\n      username: name,\n    };\n  }\n\n  async getAccount(chainId: string) {\n    const {\n      address,\n      algo,\n      pubkey,\n      name,\n      isNanoLedger,\n      isVectisAccount,\n    } = await this.client.getKey(chainId);\n    return {\n      username: name,\n      address,\n      algo: algo as Algo,\n      pubkey,\n      isNanoLedger,\n      isSmartContract: isVectisAccount,\n    };\n  }\n\n  async getOfflineSigner(chainId: string, preferredSignType?: SignType) {\n    switch (preferredSignType) {\n      case 'amino':\n        return this.getOfflineSignerAmino(chainId);\n      case 'direct':\n        return this.getOfflineSignerDirect(chainId);\n      default:\n        return this.getOfflineSignerAmino(chainId);\n    }\n  }\n\n  getOfflineSignerAmino(chainId: string) {\n    return this.client.getOfflineSignerAmino(chainId);\n  }\n\n  getOfflineSignerDirect(chainId: string) {\n    return this.client.getOfflineSignerDirect(chainId);\n  }\n\n  async addChain({ chain, name, assetList, preferredEndpoints }: ChainRecord) {\n    const chainInfo = chainRegistryChainToKeplr(\n      chain,\n      assetList ? [assetList] : []\n    );\n\n    if (preferredEndpoints?.rest?.[0]) {\n      (chainInfo.rest as\n        | string\n        | ExtendedHttpEndpoint) = preferredEndpoints?.rest?.[0];\n    }\n\n    if (preferredEndpoints?.rpc?.[0]) {\n      (chainInfo.rpc as\n        | string\n        | ExtendedHttpEndpoint) = preferredEndpoints?.rpc?.[0];\n    }\n\n    await this.client.suggestChains([chainInfo]);\n  }\n\n  async signAmino(\n    chainId: string,\n    signer: string,\n    signDoc: StdSignDoc,\n    signOptions?: SignOptions\n  ) {\n    return await this.client.signAmino(signer, signDoc);\n  }\n\n  async signDirect(\n    chainId: string,\n    signer: string,\n    signDoc: DirectSignDoc,\n    signOptions?: SignOptions\n  ) {\n    return await this.client.signDirect(signer, signDoc);\n  }\n\n  async signArbitrary(\n    chainId: string,\n    signer: string,\n    data: string | Uint8Array\n  ): Promise<StdSignature> {\n    return await this.client.signArbitrary(chainId, signer, data);\n  }\n\n  async sendTx(chainId: string, tx: Uint8Array, mode: BroadcastMode) {\n    return await this.client.sendTx(chainId, tx, mode);\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,mBAA0C;AAcnC,IAAM,eAAN,MAA2C;AAAA,EAGhD,YAAY,QAAgB;AAC1B,SAAK,SAAS;AAAA,EAChB;AAAA,EAEA,MAAM,OAAO,UAA6B;AACxC,UAAM,KAAK,OAAO,OAAO,QAAQ;AAAA,EACnC;AAAA,EAEA,MAAM,iBAAiB,SAAiB;AACtC,UAAM,EAAE,SAAS,KAAK,IAAI,MAAM,KAAK,OAAO,OAAO,OAAO;AAC1D,WAAO;AAAA,MACL,WAAW;AAAA,MACX;AAAA,MACA;AAAA,MACA,UAAU;AAAA,IACZ;AAAA,EACF;AAAA,EAEA,MAAM,WAAW,SAAiB;AAChC,UAAM;AAAA,MACJ;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF,IAAI,MAAM,KAAK,OAAO,OAAO,OAAO;AACpC,WAAO;AAAA,MACL,UAAU;AAAA,MACV;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA,iBAAiB;AAAA,IACnB;AAAA,EACF;AAAA,EAEA,MAAM,iBAAiB,SAAiB,mBAA8B;AACpE,YAAQ,mBAAmB;AAAA,MACzB,KAAK;AACH,eAAO,KAAK,sBAAsB,OAAO;AAAA,MAC3C,KAAK;AACH,eAAO,KAAK,uBAAuB,OAAO;AAAA,MAC5C;AACE,eAAO,KAAK,sBAAsB,OAAO;AAAA,IAC7C;AAAA,EACF;AAAA,EAEA,sBAAsB,SAAiB;AACrC,WAAO,KAAK,OAAO,sBAAsB,OAAO;AAAA,EAClD;AAAA,EAEA,uBAAuB,SAAiB;AACtC,WAAO,KAAK,OAAO,uBAAuB,OAAO;AAAA,EACnD;AAAA,EAEA,MAAM,SAAS,EAAE,OAAO,MAAM,WAAW,mBAAmB,GAAgB;AAC1E,UAAM,gBAAY;AAAA,MAChB;AAAA,MACA,YAAY,CAAC,SAAS,IAAI,CAAC;AAAA,IAC7B;AAEA,QAAI,oBAAoB,OAAO,CAAC,GAAG;AACjC,MAAC,UAAU,OAEiB,oBAAoB,OAAO,CAAC;AAAA,IAC1D;AAEA,QAAI,oBAAoB,MAAM,CAAC,GAAG;AAChC,MAAC,UAAU,MAEiB,oBAAoB,MAAM,CAAC;AAAA,IACzD;AAEA,UAAM,KAAK,OAAO,cAAc,CAAC,SAAS,CAAC;AAAA,EAC7C;AAAA,EAEA,MAAM,UACJ,SACA,QACA,SACA,aACA;AACA,WAAO,MAAM,KAAK,OAAO,UAAU,QAAQ,OAAO;AAAA,EACpD;AAAA,EAEA,MAAM,WACJ,SACA,QACA,SACA,aACA;AACA,WAAO,MAAM,KAAK,OAAO,WAAW,QAAQ,OAAO;AAAA,EACrD;AAAA,EAEA,MAAM,cACJ,SACA,QACA,MACuB;AACvB,WAAO,MAAM,KAAK,OAAO,cAAc,SAAS,QAAQ,IAAI;AAAA,EAC9D;AAAA,EAEA,MAAM,OAAO,SAAiB,IAAgB,MAAqB;AACjE,WAAO,MAAM,KAAK,OAAO,OAAO,SAAS,IAAI,IAAI;AAAA,EACnD;AACF;","names":[]}